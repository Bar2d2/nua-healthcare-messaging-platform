<%= turbo_stream.update "global-notifications" do %>
  <div class="toast"
       role="alert"
       aria-live="assertive"
       aria-atomic="true"
       data-controller="toast"
       data-toast-auto-dismiss-value="true"
       data-toast-delay-value="3000">
    <div class="toast-header bg-warning text-white">
      <strong class="me-auto">Payment Retry</strong>
      <small><%= Time.current.strftime("%I:%M %p") %></small>
      <button type="button" class="btn-close btn-close-white" data-action="click->toast#close" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      <%= t('prescriptions.notices.payment_retry') %>
    </div>
  </div>
<% end %>

<!-- Update the prescription item to show new status -->
<%= turbo_stream.replace "prescription_#{@prescription.id}" do %>
  <%= render 'prescriptions/partials/prescription_item', prescription: @prescription %>
<% end %>
