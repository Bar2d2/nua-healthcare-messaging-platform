<%= turbo_stream.update "global-notifications" do %>
  <div class="toast"
       role="alert"
       aria-live="assertive"
       aria-atomic="true"
       data-controller="toast"
       data-toast-auto-dismiss-value="true"
       data-toast-delay-value="5000">
    <div class="toast-header bg-danger text-white">
      <strong class="me-auto">Payment Retry</strong>
      <small><%= Time.current.strftime("%I:%M %p") %></small>
      <button type="button" class="btn-close btn-close-white" data-action="click->toast#close" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      Failed to retry payment. Please try again later.
    </div>
  </div>
<% end %>

<!-- Update the prescription item to reflect current status (in case state changed) -->
<%= turbo_stream.replace "prescription_#{@prescription.id}" do %>
  <%= render 'prescriptions/partials/prescription_item', prescription: @prescription %>
<% end %>
